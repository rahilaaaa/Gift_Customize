{% load static %}
<!DOCTYPE HTML>
<html lang="en">

{% block head %}
    {% include "products/head.html" %}
{% endblock head %}

<body>
    {% block topbar %}
    {% include "users/header_not_search.html" %}
    {% endblock topbar %}
    
    <main>
        <section class="content-main mt-40 mb-40">
            <div class="card mx-auto card-login" style="max-width: 400px; width: 100%;">
                <div class="card-body p-5">
                    <h5 class="card-title mb-3 text-center">Reset Password</h5>
                    
                    {% if message %}
                        <div style="text-align: center; margin-top: 20px;">
                            <p>{{ message }}</p>
                            <a href="{% url 'login_user' %}">Back to Login</a>
                        </div>
                    {% else %}
                        <form method="POST">
                            {% csrf_token %}
                            
                            <div class="mb-3 position-relative">
                                <input 
                                    class="form-control" 
                                    id="new_password" 
                                    name="new_password" 
                                    type="password" 
                                    placeholder="New Password" 
                                    required
                                >
                                <i class="far fa-eye position-absolute" id="toggleNewPassword" style="right: 10px; top: 12px; cursor: pointer;"></i>
                            </div> <!-- form-group// -->
                            
                            <div class="mb-3 position-relative">
                                <input 
                                    class="form-control" 
                                    id="confirm_password" 
                                    name="confirm_password" 
                                    type="password" 
                                    placeholder="Confirm Password" 
                                    required
                                >
                                <i class="far fa-eye position-absolute" id="toggleConfirmPassword" style="right: 10px; top: 12px; cursor: pointer;"></i>
                            </div> <!-- form-group// -->
        
                            {% if error %}
                                <p style="color: red;">{{ error }}</p>
                            {% endif %}
                            
                            <div class="mb-4">
                                <button type="submit" class="btn w-100 custom-btn">Reset Password</button>
                            </div> <!-- form-group// -->
                        </form>
                    {% endif %}
                </div>
            </div>
        </section>
    </main>

    
    

    {% block scripts %}
        {% include "users/scripts.html" %}
    {% endblock scripts %}
    <script>
        // Toggle password visibility for new and confirm password fields
        const toggleNewPassword = document.getElementById("toggleNewPassword");
        const newPassword = document.getElementById("new_password");
    
        const toggleConfirmPassword = document.getElementById("toggleConfirmPassword");
        const confirmPassword = document.getElementById("confirm_password");
    
        toggleNewPassword.addEventListener("click", () => {
            const type = newPassword.type === "password" ? "text" : "password";
            newPassword.type = type;
            toggleNewPassword.classList.toggle("fa-eye-slash");
        });
    
        toggleConfirmPassword.addEventListener("click", () => {
            const type = confirmPassword.type === "password" ? "text" : "password";
            confirmPassword.type = type;
            toggleConfirmPassword.classList.toggle("fa-eye-slash");
        });
    </script>

    <style>
        .custom-btn {
            background-color: #D19C97;
            color: #fff;
            border: none;
        }
    
        .custom-btn:hover {
            background-color: #b88580;
            color: #fff;
        }
    
        .custom-btn-light {
            background-color: #f8f9fa;
            color: #212529;
            border: 1px solid #D19C97;
        }
    
        .custom-btn-light:hover {
            background-color: #e2e6ea;
            color: #212529;
        }

        .position-relative {
            position: relative;
        }
        
        .far.fa-eye {
            font-size: 18px;
        }
    </style>

</body>

</html>

